<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Burger House Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body class="bg-light">
<div class="container py-4">
  <h2 class="mb-4">ðŸ”‘ Admin Panel</h2>

  <!-- Forma za dodavanje itema -->
  <form id="addForm" class="card p-3 mb-4 shadow-sm">
    <h5>Dodaj novi item</h5>
    <select id="category" class="form-select mb-2">
      <option value="food">Hrana</option>
      <option value="drinks">PiÄ‡e</option>
    </select>
    <input id="name" class="form-control mb-2" placeholder="Naziv" required>
    <input id="price" class="form-control mb-2" placeholder="Cena (RSD)" required>
    <input id="image" class="form-control mb-2" placeholder="URL slike">
    <textarea id="desc" class="form-control mb-2" placeholder="Opis"></textarea>
    <button class="btn btn-primary w-100">Dodaj</button>
  </form>

  <!-- Lista itema -->
  <div id="itemsList"></div>
</div>

<script>
  // --- Firebase config (isti kao u index.html) ---
  const firebaseConfig = {
  apiKey: "AIzaSyDqI-XnDj1zRNKweGg6yiRKAf8J8kgRrQo",
  authDomain: "burger-house-ab51a.firebaseapp.com",
  projectId: "burger-house-ab51a",
  storageBucket: "burger-house-ab51a.appspot.com", // ispravljeno!
  messagingSenderId: "31759588920",
  appId: "1:31759588920:web:cbe71c854f3885073d50cd",
  measurementId: "G-K4ZKX4RXP7"
};
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const form = document.getElementById("addForm");
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const category = document.getElementById("category").value;
    const newItem = {
      name: document.getElementById("name").value,
      price: document.getElementById("price").value,
      image: document.getElementById("image").value || "https://via.placeholder.com/150",
      desc: document.getElementById("desc").value
    };
    await db.collection(category).add(newItem);
    form.reset();
    loadItems();
  });

  async function loadItems() {
    const listDiv = document.getElementById("itemsList");
    listDiv.innerHTML = "<h4>PostojeÄ‡e stavke</h4>";

    for (let category of ["food", "drinks"]) {
      const snapshot = await db.collection(category).get();
      if (!snapshot.empty) {
        listDiv.innerHTML += `<h5 class="mt-3">${category === "food" ? "Hrana" : "PiÄ‡e"}</h5>`;
        snapshot.forEach(doc => {
          const item = doc.data();
          listDiv.innerHTML += `
            <div class="card mb-2 p-2 shadow-sm">
              <strong>${item.name}</strong> - ${item.price} RSD <br>
              <small>${item.desc}</small><br>
              <button class="btn btn-danger btn-sm mt-1" onclick="deleteItem('${category}','${doc.id}')">ObriÅ¡i</button>
            </div>`;
        });
      }
    }
  }

  async function deleteItem(category, id) {
    await db.collection(category).doc(id).delete();
    loadItems();
  }

  loadItems();
</script>
</body>
</html>
